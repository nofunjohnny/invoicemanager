{"ast":null,"code":"import _objectSpread from \"/Users/mac10/Desktop/invoicemanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/mac10/Desktop/invoicemanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mac10/Desktop/invoicemanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mac10/Desktop/invoicemanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mac10/Desktop/invoicemanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/mac10/Desktop/invoicemanager/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mac10/Desktop/invoicemanager/src/invoices/editor.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\nimport { createInvoice, updateInvoice } from '../store';\n\nvar InvoiceEditor =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(InvoiceEditor, _Component);\n\n  function InvoiceEditor(props) {\n    var _this;\n\n    _classCallCheck(this, InvoiceEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InvoiceEditor).call(this, props));\n\n    _this.close = function () {\n      _this.setState({\n        invoice: {},\n        saving: false,\n        serverError: null\n      });\n\n      _this.props.onHide();\n    };\n\n    _this.save = function () {\n      var invoice = _this.prepareInvoice();\n\n      var action = _this.props.invoice ? _this.props.updateInvoice : _this.props.createInvoice;\n      action(invoice).then(function () {\n        return _this.close();\n      }).catch(function (e) {\n        return _this.setState({\n          serverError: e.message\n        });\n      });\n    };\n\n    _this.onNameChange = function (e) {\n      return _this.setState({\n        invoice: _objectSpread({}, _this.state.invoice, {\n          name: e.target.value\n        })\n      });\n    };\n\n    _this.onAddressChange = function (e) {\n      return _this.setState({\n        invoice: _objectSpread({}, _this.state.invoice, {\n          address: e.target.value\n        })\n      });\n    };\n\n    _this.state = {\n      invoice: props.invoice || {},\n      saving: false,\n      serverError: null\n    };\n    return _this;\n  }\n\n  _createClass(InvoiceEditor, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var prevInvoice = this.props.invoice || {};\n      var nextInvoice = nextProps.invoice || {};\n\n      if (prevInvoice.objectId !== nextInvoice.objectId) {\n        this.setState({\n          invoice: nextInvoice\n        });\n      }\n    }\n  }, {\n    key: \"prepareInvoice\",\n    value: function prepareInvoice() {\n      var invoice = this.state.invoice;\n      return _objectSpread({}, invoice, {\n        name: (invoice.name || '').trim() || null,\n        address: (invoice.address || '').trim() || null\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var show = this.props.show;\n      var _this$state = this.state,\n          invoice = _this$state.invoice,\n          serverError = _this$state.serverError,\n          saving = _this$state.saving;\n      var isNew = !this.props.invoice;\n      return React.createElement(Modal, {\n        show: show,\n        onHide: this.close,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, isNew ? 'Add' : 'Edit', \" Invoice\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Name:\"), React.createElement(\"input\", {\n        className: \"form-control\",\n        placeholder: \"Input name\",\n        value: invoice.name || '',\n        onChange: this.onNameChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Address:\"), React.createElement(\"input\", {\n        className: \"form-control\",\n        placeholder: \"Input address\",\n        value: invoice.address || '',\n        onChange: this.onAddressChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      })), serverError && React.createElement(Alert, {\n        variant: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, serverError))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.close,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Close\"), React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.save,\n        disabled: saving,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, saving ? 'Saving...' : 'Save')));\n    }\n  }]);\n\n  return InvoiceEditor;\n}(Component);\n\nexport default connect(null, {\n  createInvoice: createInvoice,\n  updateInvoice: updateInvoice\n})(InvoiceEditor);","map":{"version":3,"sources":["/Users/mac10/Desktop/invoicemanager/src/invoices/editor.js"],"names":["React","Component","connect","Modal","Button","Alert","createInvoice","updateInvoice","InvoiceEditor","props","close","setState","invoice","saving","serverError","onHide","save","prepareInvoice","action","then","catch","e","message","onNameChange","state","name","target","value","onAddressChange","address","nextProps","prevInvoice","nextInvoice","objectId","trim","show","isNew"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\n\nimport { createInvoice, updateInvoice } from '../store';\n\nclass InvoiceEditor extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      invoice     : props.invoice || {},\n      saving     : false,\n      serverError: null,\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const prevInvoice = this.props.invoice || {};\n    const nextInvoice = nextProps.invoice || {};\n\n    if (prevInvoice.objectId !== nextInvoice.objectId) {\n      this.setState({ invoice: nextInvoice })\n    }\n  }\n\n  close = () => {\n    this.setState({\n      invoice     : {},\n      saving     : false,\n      serverError: null\n    });\n\n    this.props.onHide()\n  };\n\n  prepareInvoice() {\n    const { invoice } = this.state;\n\n    return {\n      ...invoice,\n      name   : (invoice.name || '').trim() || null,\n      address: (invoice.address || '').trim() || null,\n    }\n  }\n\n  save = () => {\n    const invoice = this.prepareInvoice();\n\n    const action = this.props.invoice\n      ? this.props.updateInvoice\n      : this.props.createInvoice;\n\n    action(invoice)\n      .then(() => this.close())\n      .catch(e => this.setState({ serverError: e.message }));\n  };\n\n  onNameChange = e => this.setState({ invoice: { ...this.state.invoice, name: e.target.value } });\n  onAddressChange = e => this.setState({ invoice: { ...this.state.invoice, address: e.target.value } });\n\n  render() {\n    const { show } = this.props;\n    const { invoice, serverError, saving } = this.state;\n\n    const isNew = !this.props.invoice;\n\n    return (\n      <Modal show={show} onHide={this.close}>\n        <Modal.Header closeButton>\n          <Modal.Title>\n            {isNew ? 'Add' : 'Edit'} Invoice\n          </Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <form>\n            <div className=\"form-group\">\n              <label>Name:</label>\n              <input\n                className=\"form-control\"\n                placeholder=\"Input name\"\n                value={invoice.name || ''}\n                onChange={this.onNameChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Address:</label>\n              <input\n                className=\"form-control\"\n                placeholder=\"Input address\"\n                value={invoice.address || ''}\n                onChange={this.onAddressChange}\n              />\n            </div>\n\n            {serverError && (\n              <Alert variant=\"danger\">\n                {serverError}\n              </Alert>\n            )}\n          </form>\n        </Modal.Body>\n\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={this.close}>\n            Close\n          </Button>\n          <Button variant=\"primary\" onClick={this.save} disabled={saving}>\n            {saving ? 'Saving...' : 'Save'}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default connect(null, { createInvoice, updateInvoice })(InvoiceEditor);\n"]},"metadata":{},"sourceType":"module"}